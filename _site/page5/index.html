<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Mouse的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/css/theme.css" rel="stylesheet" type="text/css">
    <link href="/css/syntax.css" rel="stylesheet" type="text/css">
    
    <link rel="icon" href="/images/favicon.ico">
    
</head>

<body>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Mouse的博客</a>
              </div>
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Home</a></li>
                    <li class="active visible-xs-block"><a href="/links.html">Links</a></li>
                    <li class="active"><a href="/archive.html">Archive</a></li>
                    <li class="active"><a href="/about.html">About</a></li>
                    <li class="active"><a href="/feed.xml">RSS</a></li>
                    
                      <li class="active"><a href="https://github.com/gongchangyou/gongchangyou.github.io">Github</a></li>
                    
                </ul>
              </div>
        </div>
    </div>
</div>


<style>
  table{
    border-left:1px solid #000000;border-top:1px solid #000000;
    width: 100%;
    word-wrap:break-word; word-break:break-all;
  }
  table th{
  text-align:center;
  }
  table th,td{
    border-right:1px solid #000000;border-bottom:1px solid #000000;
  }
</style>

<div class="container container-left">
    <div class="row">
        <div class="col-md-3 hidden-xs">
            <div class="sidebar well" align="center">
<img src="/images/favicon.ico" alt=""/>
<h4>
记录学习生活工作的点滴
</h4>
</div>

<div class="sidebar well">
    <h1>Recent Posts</h1>
    <ul>
        
          <li><a href="/2022/05/Dubbo-source-code">dubbo</a></li>
        
          <li><a href="/2022/05/CompletableFuture">CompletableFuture</a></li>
        
          <li><a href="/2022/05/maven-antrun-plugin">antrun</a></li>
        
          <li><a href="/2022/05/Idea-in-windows">idea</a></li>
        
          <li><a href="/2022/05/VS-code-in-windows">vscode</a></li>
        
    </ul>
</div>
<div class="sidebar well">
	<h1>标签</h1>
		
			
				<li><a href="/tag/c++" title="c++">c++<sup>13</sup></a></li>
			
		
			
				<li><a href="/tag/git" title="git">git<sup>5</sup></a></li>
			
		
			
				<li><a href="/tag/ios" title="ios">ios<sup>5</sup></a></li>
			
		
			
				<li><a href="/tag/mac" title="mac">mac<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/life" title="life">life<sup>21</sup></a></li>
			
		
			
				<li><a href="/tag/mysql" title="mysql">mysql<sup>10</sup></a></li>
			
		
			
				<li><a href="/tag/shell" title="shell">shell<sup>11</sup></a></li>
			
		
			
				<li><a href="/tag/python" title="python">python<sup>8</sup></a></li>
			
		
			
				<li><a href="/tag/shader" title="shader">shader<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/php" title="php">php<sup>5</sup></a></li>
			
		
			
				<li><a href="/tag/java" title="java">java<sup>49</sup></a></li>
			
		
			
				<li><a href="/tag/kotlin" title="kotlin">kotlin<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/go" title="go">go<sup>5</sup></a></li>
			
		
			
				<li><a href="/tag/elasticsearch" title="elasticsearch">elasticsearch<sup>4</sup></a></li>
			
		
			
				<li><a href="/tag/k8s" title="k8s">k8s<sup>1</sup></a></li>
			
		
			
				<li><a href="/tag/webgl" title="webgl">webgl<sup>1</sup></a></li>
			
		
</div>
<!-- 
<div class="sidebar well">
<h1>Links</h1>
<ul>
  <li><a href="#">One</a></li>
  <li><a href="#">Two</a></li>
  <li><a href="#">Three</a></li>
  <li><a href="#">Four</a></li>
</ul>

</div> -->

        </div>
        <div class="col-md-9">
            
<div class="article">
    <div class="well">
        <h1><a href="/2022/05/OWASP">May 15, 2022 - java项目 依赖检查</a></h1>
        
        <div class="content">
            <h1 id="owasp">OWASP</h1>

<p>官网： <a href="https://owasp.org/">https://owasp.org/</a></p>

<p>网站安全top 10: <a href="https://owasp.org/www-project-top-ten/">https://owasp.org/www-project-top-ten/</a></p>

<p>检测插件 <a href="https://blog.csdn.net/qq_35624642/article/details/122438449">https://blog.csdn.net/qq_35624642/article/details/122438449</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!--        代码依赖包安全漏洞检测--&gt;
&lt;!-- https://mvnrepository.com/artifact/org.owasp/dependency-check-maven --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.owasp&lt;/groupId&gt;
    &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;
    &lt;version&gt;6.5.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;!--        代码依赖包安全漏洞检测--&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.owasp&lt;/groupId&gt;
                &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;autoUpdate&gt;true&lt;/autoUpdate&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;check&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
</code></pre></div></div>

<p>如下图点击maven:check</p>

<p><img src="/images/202205/WechatIMG143.png" alt="" width="800" /></p>

<p>运行结束后，会在target下生成检测报告dependency-check-report.html，直接浏览器打开查看就可以了</p>

<p><img src="/images/202205/WechatIMG144.png" alt="" width="800" /></p>


        </div>
    </div>
</div>

<div class="article">
    <div class="well">
        <h1><a href="/2022/05/maven_plugin">May 14, 2022 - maven plugin</a></h1>
        
        <div class="content">
            <h1 id="maven-插件编写">maven 插件编写</h1>

<p>参考文章： <a href="https://blog.csdn.net/weixin_44433834/article/details/122620067">https://blog.csdn.net/weixin_44433834/article/details/122620067</a></p>

<p>项目地址： <a href="https://github.com/gongchangyou/mavenplugin">https://github.com/gongchangyou/mavenplugin</a></p>

<ol>
  <li>
    <p>修改打包方式</p>

    <ol>
      <li>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;packaging&gt;maven-plugin&lt;/packaging&gt;
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>
    <h3 id="引入插件开发相关依赖">引入插件开发相关依赖</h3>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;dependencies&gt;
        &lt;!--插件的抽象类--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
            &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;
            &lt;version&gt;3.6.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--MOJO注解的来源--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;
            &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;
            &lt;version&gt;3.6.0&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
    
    &lt;/dependencies&gt;
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;
            &lt;version&gt;3.6.2&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <h3 id="继承插件父类设置目标">继承插件父类，设置目标</h3>
  </li>
  <li>
    <h3 id="绑定到构建生命周期">绑定到构建生命周期</h3>
  </li>
  <li>
    <h3 id="默认可获取的参数">默认可获取的参数</h3>
  </li>
  <li>编写代码</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">com</span><span class="p">.</span><span class="n">hundsun</span><span class="p">.</span><span class="n">broker</span><span class="p">;</span>
 
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">commons</span><span class="p">.</span><span class="n">lang3</span><span class="p">.</span><span class="n">StringUtils</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugin</span><span class="p">.</span><span class="n">AbstractMojo</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugin</span><span class="p">.</span><span class="n">MojoExecutionException</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugin</span><span class="p">.</span><span class="n">MojoFailureException</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugins</span><span class="p">.</span><span class="n">annotations</span><span class="p">.</span><span class="n">LifecyclePhase</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugins</span><span class="p">.</span><span class="n">annotations</span><span class="p">.</span><span class="n">Mojo</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">plugins</span><span class="p">.</span><span class="n">annotations</span><span class="p">.</span><span class="n">Parameter</span><span class="p">;</span>
 
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">File</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="k">List</span><span class="p">;</span>
 
<span class="p">/**</span>
 <span class="p">*</span> <span class="p">@</span><span class="n">author</span> <span class="n">yyzsx</span>
 <span class="p">*</span> <span class="p">@</span><span class="k">version</span> <span class="m">1.0.0</span>
 <span class="p">*</span> <span class="p">@</span><span class="n">ProjectName</span> <span class="n">yyzsx</span><span class="p">-</span><span class="n">maven</span><span class="p">-</span><span class="n">plugin</span>
 <span class="p">*</span> <span class="p">@</span><span class="n">ClassName</span> <span class="n">MyMojo</span><span class="p">.</span><span class="n">java</span>
 <span class="p">*</span> <span class="p">@</span><span class="n">Description</span> <span class="err">演示</span><span class="p">-</span><span class="err">输出项目信息</span>
 <span class="p">*</span> <span class="p">@</span><span class="n">createTime</span> <span class="m">2021</span><span class="err">年</span><span class="m">08</span><span class="err">月</span><span class="m">08</span><span class="err">日</span> <span class="m">13</span><span class="p">:</span><span class="m">53</span><span class="p">:</span><span class="m">00</span>
 <span class="p">*/</span>
<span class="p">@</span><span class="n">Mojo</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s2">"showProjectInfo"</span><span class="p">,</span> <span class="n">defaultPhase</span> <span class="p">=</span> <span class="n">LifecyclePhase</span><span class="p">.</span><span class="nf">COMPILE</span><span class="p">)</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">MyMojo</span> <span class="n">extends</span> <span class="n">AbstractMojo</span> <span class="p">{</span>
    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">项目根路径</span>
     <span class="p">*/</span>
    <span class="p">@</span><span class="n">Parameter</span><span class="p">(</span><span class="n">defaultValue</span> <span class="p">=</span> <span class="s2">"${basedir}"</span><span class="p">,</span> <span class="n">readonly</span> <span class="p">=</span> <span class="nb">true</span><span class="p">,</span> <span class="n">required</span> <span class="p">=</span> <span class="nb">true</span><span class="p">)</span>
    <span class="n">private</span> <span class="n">File</span> <span class="n">basedir</span><span class="p">;</span>
 
    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">获取</span><span class="n">pom</span><span class="err">文件中项目版本，或者支持</span><span class="p">-</span><span class="n">Dversion</span><span class="p">=</span><span class="n">xx</span><span class="err">，进行传入</span>
     <span class="p">*/</span>
    <span class="p">@</span><span class="n">Parameter</span><span class="p">(</span><span class="n">property</span> <span class="p">=</span> <span class="s2">"version"</span><span class="p">,</span> <span class="n">defaultValue</span> <span class="p">=</span> <span class="s2">"${project.version}"</span><span class="p">,</span> <span class="n">readonly</span> <span class="p">=</span> <span class="nb">true</span><span class="p">,</span> <span class="n">required</span> <span class="p">=</span> <span class="nb">true</span><span class="p">)</span>
    <span class="n">private</span> <span class="k">String</span> <span class="k">version</span><span class="p">;</span>
 
    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">获取本地</span><span class="n">maven</span><span class="err">仓库地址</span>
     <span class="p">*/</span>
    <span class="p">@</span><span class="n">Parameter</span><span class="p">(</span><span class="n">defaultValue</span> <span class="p">=</span> <span class="s2">"${settings.localRepository}"</span><span class="p">,</span> <span class="n">readonly</span> <span class="p">=</span> <span class="nb">true</span><span class="p">,</span> <span class="n">required</span> <span class="p">=</span> <span class="nb">true</span><span class="p">)</span>
    <span class="n">private</span> <span class="k">String</span> <span class="n">localRepository</span><span class="p">;</span>
 
    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">参数配置，作者</span>
     <span class="p">*/</span>
    <span class="p">@</span><span class="n">Parameter</span><span class="p">(</span><span class="n">property</span> <span class="p">=</span> <span class="s2">"author"</span><span class="p">,</span> <span class="n">defaultValue</span> <span class="p">=</span> <span class="s2">"${showProjectInfo.author}"</span><span class="p">,</span> <span class="n">readonly</span> <span class="p">=</span> <span class="nb">true</span><span class="p">,</span> <span class="n">required</span> <span class="p">=</span> <span class="nb">true</span><span class="p">)</span>
    <span class="n">private</span> <span class="k">String</span> <span class="n">author</span><span class="p">;</span>
 
    <span class="p">/***</span>
     <span class="p">*</span> <span class="err">参数集合</span>
     <span class="p">*/</span>
    <span class="p">@</span><span class="n">Parameter</span><span class="p">(</span><span class="n">property</span> <span class="p">=</span> <span class="s2">"lists"</span><span class="p">,</span> <span class="n">readonly</span> <span class="p">=</span> <span class="nb">true</span><span class="p">)</span>
    <span class="n">private</span> <span class="k">List</span> <span class="n">lists</span><span class="p">;</span>
 
    <span class="p">@</span><span class="n">Override</span>
    <span class="k">public</span> <span class="n">void</span> <span class="n">execute</span><span class="p">()</span> <span class="n">throws</span> <span class="n">MojoExecutionException</span><span class="p">,</span> <span class="n">MojoFailureException</span> <span class="p">{</span>
        <span class="n">getLog</span><span class="p">().</span><span class="n">info</span><span class="p">(</span><span class="s2">"*******************ShowProjectInfo*******************"</span><span class="p">);</span>
        <span class="n">getLog</span><span class="p">().</span><span class="n">info</span><span class="p">(</span><span class="s2">"--------------------MyFirstMojo,begin--------------------"</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"欢迎语：Hello Maven Plugin"</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"项目本地仓库localRepository:"</span> <span class="p">+</span> <span class="n">this</span><span class="p">.</span><span class="n">localRepository</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"项目跟路径basedir:"</span> <span class="p">+</span> <span class="n">basedir</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"项目版本version:"</span> <span class="p">+</span> <span class="n">this</span><span class="p">.</span><span class="k">version</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"项目作者author:"</span> <span class="p">+</span> <span class="n">author</span><span class="p">);</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"项目包含文件类型lists："</span> <span class="p">+</span> <span class="n">StringUtils</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">lists</span><span class="p">.</span><span class="n">toArray</span><span class="p">(),</span> <span class="s2">","</span><span class="p">));</span>
        <span class="n">getLog</span><span class="p">().</span><span class="n">info</span><span class="p">(</span><span class="s2">"--------------------MyFirstMojo,end-----------------------"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
 
</code></pre></div></div>

<ol>
  <li>
    <p>mvn install</p>
  </li>
  <li>
    <p>调用命令执行</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn compile
</code></pre></div>    </div>

    <p>或者 指定执行goal</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn com.mouse:test-maven-plugin:0.0.1-SNAPSHOT:showProjectInfo
   
格式是这样的: mvn groupId:artifactId:version:goal
   
缩写： mvn test:showProjectInfo
</code></pre></div>    </div>
  </li>
</ol>

<p>IDEA 开发maven plugin . 在command line这里无需写mvn</p>

<p><img src="/images/202205/WechatIMG145.png" alt="" width="800" /></p>

<h3 id="每次编辑mojo文件后需要mvn-install-再执行-mvn-testshowprojectinfo">每次编辑mojo文件后，需要mvn install 再执行 mvn test:showProjectInfo</h3>

<p>问题1： 有时候会报 Index 23886 out of bounds for length 6498 之类的错</p>

<p>回答1：  添加如下配置</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.6.0&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;default-descriptor&lt;/id&gt;
                        &lt;phase&gt;process-classes&lt;/phase&gt;
                    &lt;/execution&gt;
                    &lt;!-- if you want to generate help goal --&gt;
                    &lt;execution&gt;
                        &lt;id&gt;help-goal&lt;/id&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;helpmojo&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
</code></pre></div></div>

        </div>
    </div>
</div>

<div class="article">
    <div class="well">
        <h1><a href="/2022/05/c++">May 8, 2022 - c++ starter</a></h1>
        
        <div class="content">
            <h1 id="c-入门">c++ 入门</h1>

<p>参考文章: <a href="https://www.runoob.com/cplusplus/cpp-tutorial.html">https://www.runoob.com/cplusplus/cpp-tutorial.html</a></p>

<p>vector 初始化: https://blog.csdn.net/veghlreywg/article/details/80400382</p>


        </div>
    </div>
</div>


<div class="pagination">
  
      
        <a class="btn btn-default" href="/page4" class="previous">Newer</a>
      
  
  <span class="page_number ">Page: 5 of 47</span>
  
    <a class="btn btn-default" href="/page6" class="next">Older</a>
  
</div>

        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12 footer navbar-inverse navbar-fixed-bottom">
            <p class="copyright">&copy;2022 Mouse的博客. Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme by <a href="https://github.com/scotte/jekyll-clean">Scott Emmons</a>
            under
            <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution</a></p>
        </div>
    </div>
</div>






</body>
</html>

