I"¯<h1 id="spring-cloud-stream---rocketmq">Spring Cloud Stream  &amp; RocketMQ</h1>

<h2 id="rocketmqæœ‰ä¸¤ç§å®ç°æ–¹å¼">RocketMQæœ‰ä¸¤ç§å®ç°æ–¹å¼</h2>

<ol>
  <li>
    <p>Rocketmq-spring-boot-starter æ¡†æ¶ (rocketmq &amp;&amp; spring-boot)</p>
  </li>
  <li>
    <p>Spring-cloud-starter-stream-rocketmq æ¡†æ¶ã€‚æ¨èä½¿ç”¨è¿™ä¸ªï¼Œå› ä¸ºspring-cloud-stream é›†æˆå¤šç§MQ <a href="https://spring.io/projects/spring-cloud-stream">https://spring.io/projects/spring-cloud-stream</a></p>
  </li>
</ol>

<p>ä¾èµ–: <a href="https://mvnrepository.com/artifact/com.alibaba.cloud/spring-cloud-starter-stream-rocketmq">https://mvnrepository.com/artifact/com.alibaba.cloud/spring-cloud-starter-stream-rocketmq</a></p>

<p>sample <a href="https://github.com/spring-cloud/spring-cloud-stream-samples">https://github.com/spring-cloud/spring-cloud-stream-samples</a></p>

<p>ç½‘ä¸Šèµ„æ–™åˆ°å¤„éƒ½æ˜¯Outputæ³¨è§£ï¼Œ ç°åœ¨å·²ç»deprecatedï¼Œç›®å‰æ¨èä½¿ç”¨ StreamBridge</p>

<p>ç”Ÿäº§è€…</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
public class Producer {

    @Autowired
    private StreamBridge messageChannel;

    public boolean sendMsg(String msg) {
        return messageChannel.send("test-topic", MessageBuilder.withPayload(msg).build());
    }
}
</code></pre></div></div>

<p>å¥‡æ€ªè¿™ä¸ª send çš„ç»“æœå§‹ç»ˆè¿”å›true ï¼Œæ€€ç–‘ç°åœ¨æ˜¯å¼‚æ­¥å‘é€ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RocketMQMessageHandler ä¸­syncé»˜è®¤æ˜¯ false
	private boolean sync = false;

</code></pre></div></div>

<p>æ‰€ä»¥éœ€è¦æŠŠrocketçš„sync ç½®ä½æˆtrue</p>

<p>æ³¨æ„è¿™é‡Œæ˜¯æ‡’åŠ è½½,   StreamBridge.sendçš„æ—¶å€™æ‰ä¼šå»è¯»å–RocketMQ çš„é…ç½®</p>

<p><img src="/images/202201/1643423202295.jpg" alt="embbed" /></p>

<p>è¿™é‡ŒbindingNameå°±æ˜¯ä¸»é¢˜ï¼Œå¦‚æœè·Ÿapplication.propertiesä¸­çš„ä¸ä¸€æ ·ï¼Œåˆ™ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ RocketMQProducerProperties</p>
:ET