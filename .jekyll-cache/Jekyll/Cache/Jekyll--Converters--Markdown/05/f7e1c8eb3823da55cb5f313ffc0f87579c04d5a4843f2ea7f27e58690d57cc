I"ù<h1 id="æ–¹æ³•1-æ¨è-docker-å®‰è£…">æ–¹æ³•1ï¼š æ¨è docker å®‰è£…</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull gitlab/gitlab-ce:[version]  æœ€å¥½é€‰æ‹©è·Ÿä¸»ä¸€ä¸ªç‰ˆæœ¬ï¼Œé¿å…å‡ºç°ä»€ä¹ˆå¹ºè›¾å­

docker run -detach --publish 8443:443 --publish 9091:80 --publish 8022:22  --publish 5005:5005 --name gitlab --restart always --volume /srv/gitlab/config:/etc/gitlab --volume /srv/gitlab/logs:/var/log/gitlab --volume /srv/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce:13.7.1-ce.0


å¯èƒ½éœ€è¦æ”¹ä¸€äº›é…ç½®

vi /srv/gitlab/config/gitlab.rb

external_url 


postgresql['shared_buffers'] = "256MB"

å¦‚æœpuma å¯åŠ¨ä¸äº† çœ‹åˆ°pidä¸åœå˜å¤§
gitlab-ctl tail puma

puma['port'] = 8888
gitlab_workhorse['auth_backend'] = "http://localhost:8888"



</code></pre></div></div>

<h1 id="æ–¹æ³•2ä¸æ¨ègitlab-install">æ–¹æ³•2ï¼ˆä¸æ¨èï¼‰ï¼šgitlab-install</h1>

<p><a href="https://blog.csdn.net/qq_35844177/article/details/106876923">https://blog.csdn.net/qq_35844177/article/details/106876923</a></p>

<ol>
  <li>
    <p>sudo apt update
sudo apt install ca-certificates curl openssh-server postfix</p>
  </li>
  <li>
    <p>cd /tmp
 curl -LO https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh</p>

    <p>less /tmp/script.deb.sh</p>

    <p>sudo bash /tmp/script.deb.sh</p>

    <p>sudo apt install gitlab-ce</p>
  </li>
</ol>

<p>å¦‚æœä¸€åˆ‡é¡ºåˆ© é‚£ä¹ˆ gitlab-ctl start å°±å¤Ÿäº†ã€‚</p>

<h1 id="å¯èƒ½ä½ çš„æœåŠ¡å™¨ä¸Šå·²ç»å®‰è£…äº†å…¶ä»–çš„åº”ç”¨-å ç”¨äº†åŸæœ‰çš„ç«¯å£">å¯èƒ½ä½ çš„æœåŠ¡å™¨ä¸Šå·²ç»å®‰è£…äº†å…¶ä»–çš„åº”ç”¨ å ç”¨äº†åŸæœ‰çš„ç«¯å£</h1>
<p>åˆ™éœ€è¦å»ä¿®æ”¹é…ç½®æ–‡ä»¶</p>

<p>vim /etc/gitlab/gitlab.rb</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>external_url 'http://10.1.48.192:9091' 

 puma['port'] =9092
</code></pre></div></div>

<h2 id="é‡ç½®é…ç½®-å¹¶-é‡å¯">é‡ç½®é…ç½® å¹¶ é‡å¯</h2>

<p>gitlab-ctl reconfigure</p>

<p>gitlab-ctl restart</p>

<h2 id="æŸ¥çœ‹æ—¥å¿—å‘½ä»¤">æŸ¥çœ‹æ—¥å¿—å‘½ä»¤ï¼š</h2>

<p>gitlab-ctl tail</p>

<table>
  <tbody>
    <tr>
      <td>gitlab-ctl tail</td>
      <td>grep -i error</td>
    </tr>
  </tbody>
</table>

<h2 id="æŸ¥çœ‹ç«¯å£å‘½ä»¤">æŸ¥çœ‹ç«¯å£å‘½ä»¤ï¼š</h2>

<p>lsof -i:9091</p>

:ET