---
layout: post
title: "mongodb index"
date: 2022-07-12 10:25:06 +0800
comments: true
category: mysql
tag: [mysql]


---

# kafka

参考文章： [https://blog.csdn.net/qq_36042938/article/details/86690188](https://blog.csdn.net/qq_36042938/article/details/86690188)

广播和单播：

广播： 多个consumer 使用不同的group。 这样每个group都能获取到所有消息。对应下游不同业务对接同一个上游的场景。

单播：多个consumer 使用相同的group。 这样每个consumer被分配到不同的消息，加速消费。



## 实际场景

当然实际场景会有一些特殊的情况，比如下游部门丢消息了，想让你补发，如果我们用广播模式，那下游那些没想刷数据的部门也会收到消息。这时候“懦弱”的上游只能给每个下游安排一个topic隔离。这样其实是把困难留给了自己，如果某一天下游十七八个部门都要求补发，那这天你就甭干别的事儿了。

话说回来，消息弄丢了其实是下游部门的问题，得先严格保证事情处理完了之后再ack. 上游只需提供一个根据id的反查接口 和 一个scan的迭代接口方便全量刷新即可。